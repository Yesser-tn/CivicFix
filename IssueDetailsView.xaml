<Window x:Class="CivicFix.UI.IssueDetailsView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:CivicFix.UI.Converters"
        Title="Issue Details"
        Height="480"
        Width="620"
        WindowStartupLocation="CenterScreen"
        Background="#0F172A">

    <Window.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibility"/>
    </Window.Resources>

    <Grid Margin="16">
        <Border Background="#020617"
                CornerRadius="16"
                Padding="16"
                BorderBrush="#1E293B"
                BorderThickness="1">

            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>

  
                    <StackPanel Orientation="Horizontal"
                                Margin="0,0,0,14">
                        <TextBlock FontFamily="Segoe Fluent Icons"
                                   Text="&#xE8FD;"
                                   FontSize="18"
                                   Foreground="#60A5FA"
                                   Margin="0,0,8,0"/>
                        <TextBlock Text="{Binding Title}"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   Foreground="#E5E7EB"/>
                    </StackPanel>

                
                    <Grid Margin="0,0,0,14">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

               
                        <StackPanel>
                            <TextBlock Text="Category"
                                       Foreground="#94A3B8"
                                       FontSize="12"/>
                            <TextBlock Text="{Binding Category}"
                                       Foreground="#E5E7EB"
                                       Margin="0,3,0,10"/>

                            <TextBlock Text="Location"
                                       Foreground="#94A3B8"
                                       FontSize="12"/>
                            <TextBlock Text="{Binding Location}"
                                       Foreground="#E5E7EB"
                                       Margin="0,3,0,10"/>
                        </StackPanel>

               
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Status"
                                       Foreground="#94A3B8"
                                       FontSize="12"/>

                    
                            <Border Padding="6,2"
                                    CornerRadius="10"
                                    HorizontalAlignment="Left"
                                    Margin="0,4,0,10">
                                <TextBlock Text="{Binding Status}"
                                           FontSize="11"
                                           FontWeight="SemiBold"
                                           Foreground="#020617"/>
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="#CBD5E1"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Status}" Value="Pending">
                                                <Setter Property="Background" Value="#FACC15"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}" Value="In Progress">
                                                <Setter Property="Background" Value="#60A5FA"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}" Value="Resolved">
                                                <Setter Property="Background" Value="#22C55E"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}" Value="Rejected">
                                                <Setter Property="Background" Value="#EF4444"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                            </Border>

                            <TextBlock Text="Created At"
                                       Foreground="#94A3B8"
                                       FontSize="12"/>
                            <TextBlock Text="{Binding CreatedAt}"
                                       Foreground="#E5E7EB"
                                       Margin="0,3,0,10"/>
                        </StackPanel>
                    </Grid>

                    <TextBlock Text="Description"
                               Foreground="#94A3B8"
                               FontSize="12"/>
                    <Border Background="#020617"
                            BorderBrush="#334155"
                            BorderThickness="1"
                            CornerRadius="10"
                            Padding="10"
                            Margin="0,4,0,18">
                        <TextBlock Text="{Binding Description}"
                                   Foreground="#E5E7EB"
                                   TextWrapping="Wrap"/>
                    </Border>

                  
                    <StackPanel Visibility="{Binding CanUpdateStatus, Converter={StaticResource BoolToVisibility}}">

                        <Separator Margin="0,10"/>

                        <TextBlock Text="Update Status"
                                   FontSize="15"
                                   FontWeight="SemiBold"
                                   Foreground="#E5E7EB"
                                   Margin="0,8,0,8"/>

                        <TextBlock Text="Status"
                                   Foreground="#94A3B8"
                                   FontSize="12"/>

                        <ComboBox ItemsSource="{Binding AvailableStatuses}"
          SelectedItem="{Binding Status}"
          Height="34"
          Padding="8,3"
          FontSize="13"
          Background="White"
          Foreground="Black"
          BorderBrush="#334155"
          Margin="0,4,0,12">

                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="ComboBoxItem">
                                    <Setter Property="Background" Value="White"/>
                                    <Setter Property="Foreground" Value="Black"/>
                                    <Setter Property="Padding" Value="8,4"/>

                                    <Style.Triggers>
                                        <Trigger Property="IsHighlighted" Value="True">
                                            <Setter Property="Background" Value="White"/>
                                            <Setter Property="Foreground" Value="Black"/>
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background" Value="White"/>
                                            <Setter Property="Foreground" Value="Black"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </ComboBox.ItemContainerStyle>

                        </ComboBox>

                        <TextBlock Text="Resolution Note"
                                   Foreground="#94A3B8"
                                   FontSize="12"/>

                        <TextBox Text="{Binding ResolutionNote}"
                                 Height="80"
                                 Padding="8,5"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 Background="#020617"
                                 Foreground="#E5E7EB"
                                 BorderBrush="#334155"
                                 Margin="0,4,0,14"/>

                        <Button Height="38"
                                Background="#2563EB"
                                Foreground="White"
                                BorderThickness="0"
                                FontWeight="SemiBold"
                                Cursor="Hand"
                                Click="Save_Click">

                            <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Center">
                                <TextBlock FontFamily="Segoe Fluent Icons"
                                           Text="&#xE74E;"
                                           FontSize="14"
                                           Margin="0,0,6,0"/>
                                <TextBlock Text="Save Changes"/>
                            </StackPanel>
                        </Button>

                    </StackPanel>

                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>
